<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bilingual Blog Guide</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/custom.css">
</head>
<body>
    <header>
        <nav>
            <a href="/" class="site-title">Marc Liu</a>
            <button id="theme-toggle" aria-label="Toggle theme">
                <img id="sun-icon" class="theme-icon" src="/assets/icons/sun.svg" alt="Sun Icon">
                <img id="moon-icon" class="theme-icon" src="/assets/icons/moon.svg" alt="Moon Icon" style="display: none;">
            </button>
        </nav>
    </header>

    <h1 id="bilingual-blog-guide">Bilingual Blog Guide</h1>

<p>This guide explains how to create bilingual blog posts with a clean, user-friendly syntax.</p>

<h2 id="user-friendly-syntax">User-Friendly Syntax</h2>

<p>You can write bilingual content using the clean <code class="language-plaintext highlighter-rouge">:::lang:</code> syntax:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Bilingual</span><span class="nv"> </span><span class="s">Post"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2024-01-01</span>
<span class="na">bilingual</span><span class="pi">:</span> <span class="no">true</span>
<span class="nn">---</span>

This content appears in both languages.

:::lang:en
<span class="gh"># English Section</span>
This content only appears in English.
:::lang:end

:::lang:zh
<span class="gh"># 中文部分</span>
这个内容只在中文中显示。
:::lang:end

This conclusion appears in both languages.
</code></pre></div></div>

<h2 id="streaming-parser-implementation">Streaming Parser Implementation</h2>

<p>The bilingual system uses a <strong>streaming parser</strong> that processes content character by character (no regex):</p>

<h3 id="key-features">Key Features:</h3>
<ul>
  <li>✅ <strong>Character-by-character processing</strong> - No regex patterns</li>
  <li>✅ <strong>Clean syntax</strong> - Just <code class="language-plaintext highlighter-rouge">:::lang:en</code> and <code class="language-plaintext highlighter-rouge">:::lang:end</code></li>
  <li>✅ <strong>Language detection</strong> - Automatically detects bilingual content</li>
  <li>✅ <strong>Proper HTML output</strong> - Generates semantic HTML with language classes</li>
</ul>

<h3 id="how-it-works">How It Works:</h3>

<ol>
  <li><strong>Streaming Algorithm</strong>: The parser reads each character sequentially</li>
  <li><strong>Marker Detection</strong>: When it encounters <code class="language-plaintext highlighter-rouge">:</code>, it looks ahead for <code class="language-plaintext highlighter-rouge">:::lang:</code></li>
  <li><strong>Language Sections</strong>: Creates proper HTML divs with language attributes</li>
  <li><strong>Content Preservation</strong>: All content between markers is preserved exactly</li>
</ol>

<h3 id="preprocessing-script">Preprocessing Script</h3>

<p>Use the preprocessing script to convert user-friendly syntax:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Convert user-friendly syntax to Jekyll-compatible HTML</span>
ruby scripts/bilingual_preprocessor.rb input.md output.md
</code></pre></div></div>

<p>The script will:</p>
<ul>
  <li>Parse your markdown character by character</li>
  <li>Convert <code class="language-plaintext highlighter-rouge">:::lang:en</code> markers to <code class="language-plaintext highlighter-rouge">&lt;div class="lang-content lang-en"&gt;</code></li>
  <li>Wrap everything in a bilingual container</li>
  <li>Preserve all your content exactly as written</li>
</ul>

<h3 id="example-workflow">Example Workflow:</h3>

<ol>
  <li><strong>Write</strong> your post with clean syntax:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:::lang:en
English content here
:::lang:end
</code></pre></div>    </div>
  </li>
  <li><strong>Process</strong> with the streaming parser:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ruby scripts/bilingual_preprocessor.rb my_post.md
</code></pre></div>    </div>
  </li>
  <li><strong>Result</strong> is Jekyll-compatible HTML:
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"lang-content lang-en"</span> <span class="na">data-lang=</span><span class="s">"en"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>
English content here
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="benefits-of-this-approach">Benefits of This Approach</h2>

<h3 id="for-authors">For Authors:</h3>
<ul>
  <li><strong>Simple syntax</strong> - No HTML knowledge required</li>
  <li><strong>Natural writing</strong> - Just add language markers</li>
  <li><strong>Version control friendly</strong> - Clean diffs</li>
  <li><strong>No learning curve</strong> - Intuitive marker system</li>
</ul>

<h3 id="for-developers">For Developers:</h3>
<ul>
  <li><strong>No regex</strong> - Streaming character-by-character parsing</li>
  <li><strong>Reliable</strong> - Handles edge cases gracefully</li>
  <li><strong>Extensible</strong> - Easy to add new language markers</li>
  <li><strong>Fast</strong> - Efficient single-pass parsing</li>
</ul>

<h3 id="for-readers">For Readers:</h3>
<ul>
  <li><strong>Seamless switching</strong> - JavaScript-powered language toggle</li>
  <li><strong>Persistent preference</strong> - Language choice saved in localStorage</li>
  <li><strong>Smooth transitions</strong> - No page reloads</li>
  <li><strong>Semantic HTML</strong> - Proper language attributes for accessibility</li>
</ul>

<h2 id="current-implementation-status">Current Implementation Status</h2>

<p>The streaming parser is fully implemented and working. The current setup uses:</p>

<ul>
  <li><strong>Working syntax</strong>: HTML divs with <code class="language-plaintext highlighter-rouge">markdown="1"</code> (currently active)</li>
  <li><strong>Preprocessing script</strong>: Converts user-friendly syntax to working format</li>
  <li><strong>Character-by-character parsing</strong>: No regex, pure streaming algorithm</li>
</ul>

<p>To use the user-friendly syntax in your workflow:</p>
<ol>
  <li>Write posts with <code class="language-plaintext highlighter-rouge">:::lang:en</code> syntax</li>
  <li>Run the preprocessing script</li>
  <li>Commit the processed version to Jekyll</li>
</ol>

<p>This gives you the best of both worlds: clean authoring experience and reliable Jekyll processing.</p>

<h2 id="features">Features</h2>

<ul>
  <li><strong>Language Toggle</strong>: Readers can switch between English and Chinese versions with a simple button</li>
  <li><strong>Seamless Switching</strong>: No page reload required, smooth transitions</li>
  <li><strong>Language Preference</strong>: User’s language choice is saved in localStorage</li>
  <li><strong>Mixed Content</strong>: Support for content that appears in both languages</li>
  <li><strong>Native Markdown</strong>: Uses Markdown blockquotes with Kramdown attributes - no HTML knowledge required!</li>
  <li><strong>Responsive Design</strong>: Works on all device sizes</li>
</ul>

<h2 id="how-to-create-a-bilingual-post">How to Create a Bilingual Post</h2>

<h3 id="1-set-the-bilingual-flag">1. Set the Bilingual Flag</h3>

<p>Add <code class="language-plaintext highlighter-rouge">bilingual: true</code> to your post’s front matter:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Your</span><span class="nv"> </span><span class="s">Title</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">你的标题"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2024-01-01</span>
<span class="na">slug</span><span class="pi">:</span> <span class="s">your-post-slug</span>
<span class="na">bilingual</span><span class="pi">:</span> <span class="no">true</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="2-structure-your-content-using-native-markdown">2. Structure Your Content Using Native Markdown</h3>

<p>Use Markdown blockquotes with Kramdown attributes for language-specific content:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"bilingual-post"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>

<span class="c">&lt;!-- Common content that appears in both languages --&gt;</span>
Welcome to this bilingual blog!

<span class="c">&lt;!-- English-specific content using blockquotes --&gt;</span>
<span class="gt">&gt; **English**</span>
<span class="gt">&gt; </span>
<span class="gt">&gt; ## English Section</span>
<span class="gt">&gt; </span>
<span class="gt">&gt; Your English content goes here. You can use:</span>
<span class="gt">&gt; - Markdown formatting</span>
<span class="gt">&gt; - Lists and headers  </span>
<span class="gt">&gt; - Links and images</span>
<span class="gt">&gt; - Any standard markdown syntax</span>
<span class="gt">&gt; </span>
<span class="gt">&gt; This content is English-only.</span>
{: .lang-content .lang-en data-lang="en"}

<span class="c">&lt;!-- Chinese-specific content using blockquotes --&gt;</span>
<span class="gt">&gt; **中文**</span>
<span class="gt">&gt; </span>
<span class="gt">&gt; ## 中文部分</span>
<span class="gt">&gt; </span>
<span class="gt">&gt; 你的中文内容放在这里。你可以使用：</span>
<span class="gt">&gt; - Markdown 格式</span>
<span class="gt">&gt; - 列表和标题</span>
<span class="gt">&gt; - 链接和图片</span>
<span class="gt">&gt; - 任何标准的 markdown 语法</span>
<span class="gt">&gt; </span>
<span class="gt">&gt; 这个内容只有中文。</span>
{: .lang-content .lang-zh data-lang="zh"}

<span class="c">&lt;!-- More common content --&gt;</span>
This appears in both languages.

<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h3 id="3-key-syntax-elements">3. Key Syntax Elements</h3>

<ul>
  <li><strong>Blockquotes</strong>: Use <code class="language-plaintext highlighter-rouge">&gt;</code> to create language-specific content blocks</li>
  <li><strong>Kramdown Attributes</strong>: Use <code class="language-plaintext highlighter-rouge">{: .class-name}</code> to add CSS classes and attributes</li>
  <li><strong>Language Classes</strong>: <code class="language-plaintext highlighter-rouge">.lang-content .lang-en</code> for English, <code class="language-plaintext highlighter-rouge">.lang-content .lang-zh</code> for Chinese</li>
  <li><strong>Data Attributes</strong>: <code class="language-plaintext highlighter-rouge">data-lang="en"</code> and <code class="language-plaintext highlighter-rouge">data-lang="zh"</code> for JavaScript functionality</li>
  <li><strong>Container</strong>: Wrap everything in <code class="language-plaintext highlighter-rouge">&lt;div class="bilingual-post" markdown="1"&gt;</code></li>
</ul>

<h2 id="example-post-structure">Example Post Structure</h2>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Hello</span><span class="nv"> </span><span class="s">World</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">你好，世界"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2024-01-01</span>
<span class="na">slug</span><span class="pi">:</span> <span class="s">hello-world</span>
<span class="na">bilingual</span><span class="pi">:</span> <span class="no">true</span>
<span class="nn">---</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"bilingual-post"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>

This introduction appears in both languages.
<span class="gt">
&gt; **English**</span>
<span class="gt">&gt; </span>
<span class="gt">&gt; ## English Content</span>
<span class="gt">&gt; This is only visible when English is selected.</span>
{: .lang-content .lang-en data-lang="en"}
<span class="gt">
&gt; **中文**</span>
<span class="gt">&gt; </span>
<span class="gt">&gt; ## 中文内容</span>
<span class="gt">&gt; 这只有在选择中文时才可见。</span>
{: .lang-content .lang-zh data-lang="zh"}

This conclusion appears in both languages.

<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h2 id="why-this-approach">Why This Approach?</h2>

<h3 id="-native-markdown-benefits">✅ <strong>Native Markdown Benefits</strong></h3>
<ul>
  <li><strong>No HTML required</strong>: Uses standard Markdown blockquotes</li>
  <li><strong>Kramdown compatible</strong>: Leverages Jekyll’s built-in Kramdown processor</li>
  <li><strong>Semantic</strong>: Blockquotes naturally represent “quoted” or “special” content</li>
  <li><strong>Readable</strong>: Easy to read and write in plain text</li>
  <li><strong>Version control friendly</strong>: Clean diffs in git</li>
</ul>

<h3 id="-compared-to-alternatives">✅ <strong>Compared to Alternatives</strong></h3>
<ul>
  <li><strong>Better than HTML divs</strong>: More Markdown-native</li>
  <li><strong>Better than custom syntax</strong>: No custom plugins required</li>
  <li><strong>Better than fenced blocks</strong>: Doesn’t conflict with code syntax</li>
  <li><strong>Better than complex processors</strong>: Uses Jekyll’s built-in features</li>
</ul>

<h2 id="styling">Styling</h2>

<p>The language toggle and content sections are styled to match your existing theme. The toggle button appears below the post title and date, and language-specific content fades in/out smoothly when switching.</p>

<h2 id="browser-support">Browser Support</h2>

<p>The bilingual feature works in all modern browsers and degrades gracefully. If JavaScript is disabled, all content will be visible simultaneously.</p>

<h2 id="tips-for-writing-bilingual-posts">Tips for Writing Bilingual Posts</h2>

<ol>
  <li><strong>Plan your structure</strong>: Decide which sections should be language-specific and which should be common</li>
  <li><strong>Keep titles bilingual</strong>: Use format like “English Title - 中文标题”</li>
  <li><strong>Test both languages</strong>: Always preview your post in both languages before publishing</li>
  <li><strong>Use blockquote headers</strong>: Start each language block with <code class="language-plaintext highlighter-rouge">&gt; **Language Name**</code></li>
  <li><strong>Consistent attributes</strong>: Always use the correct Kramdown attributes for each language</li>
  <li><strong>Wrap in container</strong>: Don’t forget the <code class="language-plaintext highlighter-rouge">bilingual-post</code> wrapper div</li>
</ol>

<h2 id="advanced-usage">Advanced Usage</h2>

<h3 id="multiple-language-sections">Multiple Language Sections</h3>

<p>You can have multiple language-specific sections in one post:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gt">&gt; **English - Introduction**</span>
<span class="gt">&gt; This is the English introduction.</span>
{: .lang-content .lang-en data-lang="en"}
<span class="gt">
&gt; **中文 - 介绍**  </span>
<span class="gt">&gt; 这是中文介绍。</span>
{: .lang-content .lang-zh data-lang="zh"}

Common content here...
<span class="gt">
&gt; **English - Conclusion**</span>
<span class="gt">&gt; This is the English conclusion.</span>
{: .lang-content .lang-en data-lang="en"}
<span class="gt">
&gt; **中文 - 结论**</span>
<span class="gt">&gt; 这是中文结论。</span>
{: .lang-content .lang-zh data-lang="zh"}
</code></pre></div></div>


    <footer>
        <p>© 2025 Marc Liu</p>
    </footer>

    <script src="/assets/js/main.js"></script>
</body>
</html>
